<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>logtalk_tester man page</title>
<meta name="generator" content="roffit">
<STYLE type="text/css">
pre {
  overflow: auto;
  margin: 0;
}

P.level0, pre.level0 {
 padding-left: 2em;
}

P.level1, pre.level1 {
 padding-left: 4em;
}

P.level2, pre.level2 {
 padding-left: 6em;
}

span.emphasis {
 font-style: italic;
}

span.bold {
 font-weight: bold;
}

span.manpage {
 font-weight: bold;
}

h2.nroffsh {
 background-color: #e0e0e0;
}

span.nroffip {
 font-weight: bold;
 font-size: 120%;
 font-family: monospace;
}

p.roffit {
 text-align: center;
 font-size: 80%;
}
</STYLE>
</head><body>

<p class="level0">
<p class="level0"><a name="NAME"></a><h2 class="nroffsh">Name</h2>
<p class="level0">logtalk_tester - Logtalk script for automating running unit tests 
<p class="level0"><a name="SYNOPSIS"></a><h2 class="nroffsh">Synopsis</h2>
<p class="level0"><span Class="bold">logtalk_tester -v</span> <br><span Class="bold">logtalk_tester -p prolog</span> [<span class="bold">-o <span Class="emphasis">output</span>] [<span class="bold">-m <span Class="emphasis">mode</span></span>] [<span class="bold">-f <span Class="emphasis">format</span>] [<span class="bold">-d <span Class="emphasis">results</span>] [<span class="bold">-t <span Class="emphasis">timeout</span>] [<span class="bold">-n <span Class="emphasis">driver</span>] [<span class="bold">-s <span Class="emphasis">prefix</span>] [<span class="bold">-b <span Class="emphasis">tracker</span>] [<span class="bold">-u <span Class="emphasis">url</span>] [<span class="bold">-c <span Class="emphasis">report</span>] [<span class="bold">-l <span Class="emphasis">level</span>] [<span class="bold">-e <span Class="emphasis">exclude</span>] [<span class="bold">-i <span Class="emphasis">options</span>] [<span class="bold">-g <span Class="emphasis">goal</span>] [<span class="bold">-r <span Class="emphasis">seed</span>] [<span Class="bold">-w</span>] [<span class="bold">-- <span Class="emphasis">arguments</span>] <br><span Class="bold">logtalk_tester -h</span> 
<p class="level0"><a name="DESCRIPTION"></a><h2 class="nroffsh">Description</h2>
<p class="level0"><span Class="bold">logtalk_tester</span> is a script for automating running Logtalk unit tests. This script runs unit tests found on the current directory and recursively in its sub-directories by scanning by default for <span Class="emphasis">tester.lgt</span> and <span Class="emphasis">tester.logtalk</span> source files. The script returns a non-zero exit status in case of failed tests or test set errors. When a <span Class="emphasis">tester.sh</span> file exists in the tests directory, the file is sourced before running the tests. The <span Class="emphasis">tester.sh</span> file is sourced with all the parameters passed to the script. The script prints by default a full report of test compilation errors and warnings, skipped test sets, broken test sets, crashed test sets, skipped tests, failed tests, and test set and test stats. Note that the existence of broken or crashed test sets may result in some inconsistency on test stats, notably in the number of passed and failed tests. 
<p class="level0"><a name="OPTIONS"></a><h2 class="nroffsh">Options</h2>
<p class="level0">
<p class="level0"><span Class="bold">-v</span> Print script version. 
<p class="level0"><span Class="bold">-p</span> Backend Prolog compiler. Required. The following identifiers are used: B-Prolog - <span Class="emphasis">b</span>, Ciao Prolog - <span Class="emphasis">ciao</span>, CxProlog - <span Class="emphasis">cx</span>, ECLiPSe - <span Class="emphasis">eclipse</span>, GNU Prolog - <span Class="emphasis">gnu</span>, GNU Prolog (native code) - <span Class="emphasis">gnunc</span>, JIProlog - <span Class="emphasis">ji</span>, LVM - <span Class="emphasis">lvm</span>, Scryer Prolog - <span Class="emphasis">scryer</span>, SICStus Prolog - <span Class="emphasis">sicstus</span>, SWI-Prolog - <span Class="emphasis">swi</span>, SWI-Prolog with Logtalk pack - <span Class="emphasis">swipack</span>, Tau Prolog - <span Class="emphasis">tau</span>, Trealla Prolog - <span Class="emphasis">trealla</span>, XSB - <span Class="emphasis">xsb</span>, YAP - <span Class="emphasis">yap</span>. 
<p class="level0"><span Class="bold">-o</span> Output verbosity. Default is <span Class="emphasis">verbose</span>. Valid values are <span Class="emphasis">verbose</span> and <span Class="emphasis">minimal</span>. 
<p class="level0"><span Class="bold">-m</span> Compilation mode. Default is <span Class="emphasis">normal</span>. Valid values are <span Class="emphasis">optimal</span>, <span Class="emphasis">normal</span>, <span Class="emphasis">debug</span>, and <span Class="emphasis">all</span>. 
<p class="level0"><span Class="bold">-f</span> Format for writing the test results. Default is <span Class="emphasis">default</span>. Valid values are <span Class="emphasis">default</span>, <span Class="emphasis">tap</span>, <span Class="emphasis">xunit</span>, and <span Class="emphasis">xunit_net_v2</span>. 
<p class="level0"><span Class="bold">-d</span> Directory to store the test results. Default is the local <span Class="emphasis">./logtalk_tester_logs</span> directory. 
<p class="level0"><span Class="bold">-t</span> Timeout in seconds for running each test set. Default is <span Class="emphasis">0</span> (i.e. disabled). 
<p class="level0"><span Class="bold">-n</span> Name of the tests driver and sourced files (minus file name extensions). Default is <span Class="emphasis">tester</span>. 
<p class="level0"><span Class="bold">-s</span> Path prefix to suppress when printing test suite and test result paths. Default is the user home directory. 
<p class="level0"><span Class="bold">-b</span> Bug report server and optionally the bug report label(s). Valid values are <span Class="emphasis">github</span> and <span Class="emphasis">gitlab</span>. (no default). Use of this option requires the script to be called from a git repo directory or from one its sub-directories and the use of the <span Class="emphasis">-s</span> and <span Class="emphasis">-u</span> options. To set the label(s), use the syntax <span Class="emphasis">-b server:labels</span> where <span Class="emphasis">labels</span> are a comma separated list. 
<p class="level0"><span Class="bold">-u</span> Base URL for generating links to test files (no default). Must end with a slash and usually includes a git hash so that the link remanis valid if the test files are later updated. 
<p class="level0"><span Class="bold">-c</span> Code coverage report. Default is <span Class="emphasis">none</span>. Valid values are <span Class="emphasis">xml</span> and <span Class="emphasis">none</span>. 
<p class="level0"><span Class="bold">-l</span> Directory depth level to look for test sets. Level 1 means current directory only. Default is to recurse into all sub-directories. 
<p class="level0"><span Class="bold">-e</span> Regular expression for excluding directories (using the <span Class="emphasis">find</span> command support for POSIX-extended regular expressions). 
<p class="level0"><span Class="bold">-i</span> Integration script command-line options (no default). 
<p class="level0"><span Class="bold">-g</span> Initialization goal. Default is <span Class="emphasis">true</span>. Called after loading the Logtalk compiler and runtime. 
<p class="level0"><span Class="bold">-r</span> Random generator starting seed (no default). 
<p class="level0"><span Class="bold">-w</span> Wipe test set default scratch directories (<span Class="emphasis">./.lgt_tmp</span> and <span Class="emphasis">./lgt_tmp</span>) before running it. This option should not be used when running parallel processes that use the same test sets. 
<p class="level0"><span Class="bold">--</span> Arguments to be passed to the tests (no default). 
<p class="level0"><span Class="bold">-h</span> Provide help on script usage. 
<p class="level0"><a name="EXIT"></a><h2 class="nroffsh">Exit status</h2>
<p class="level0">
<p class="level0"><span Class="bold">0</span> All non-skipped tests pass (flaky test failures are ignored) and there are no broken, timedout, or crashed test sets. 
<p class="level0"><span Class="bold">1</span> Some (non-flaky) tests fail but there are no broken, timedout, or crashed test sets. 
<p class="level0"><span Class="bold">3</span> One or more test sets timedout while executing but there are no broken or crashed test sets. 
<p class="level0"><span Class="bold">5</span> One or more test sets are broken and thus could not be executed but there are no crashed test sets. 
<p class="level0"><span Class="bold">7</span> One or more test sets crashed the process running them. 
<p class="level0"><span Class="bold">9</span> The sourced <span Class="emphasis">tester.sh</span> file returned a non-zero code. 
<p class="level0"><span Class="bold">11</span> The <span Class="emphasis">find</span> command used internally to enumerate test sets returned a non-zero code (most likely due to a non-supported option). 
<p class="level0"><a name="EXAMPLES"></a><h2 class="nroffsh">Examples</h2>
<p class="level0">
<p class="level0">Run all tests on the current directory and sub-directories using the GNU Prolog backend, with results in TAP format, code coverage reports in XML format, and passing arguments <span Class="emphasis">foo</span>, <span Class="emphasis">bar</span>, and <span Class="emphasis">baz</span> to the tests: <span Class="bold">logtalk_tester -p gnu -tap -c xml -- foo bar baz</span> 
<p class="level0">
<p class="level0">Run all tests on the current directory only using the ECLiPSe backend, with a timeout of 4 minutes per test set: <span Class="bold">logtalk_tester -p eclipse -l 1 -t 240</span> 
<p class="level0">
<p class="level0">Run all tests on the current directory and sub-directories using the SICStus Prolog backend and a random generator starting seed: <span Class="bold">logtalk_tester -p sicstus -r &quot;seed(3172,9814,20125)&quot;</span> 
<p class="level0">
<p class="level0">Run all tests on the current directory and sub-directories using the SWI-Prolog backend and looking for <span Class="emphasis">tester_debug</span> driver and sourced files: <span Class="bold">logtalk_tester -p swi -n tester_debug</span> 
<p class="level0">
<p class="level0">Run all tests on the current directory and sub-directories using the Tau Prolog backend, caching the compilation of the testing tool for better performance, but wiping the test set default scratch directories before running it: <span Class="bold">logtalk_tester -p tau -g &quot;set_logtalk_flag(clean,off)&quot; -w</span> 
<p class="level0">
<p class="level0">Run the Logtalk distribution tests using the Trealla Prolog backend, passing a base URL that can be used for creating links to the test files: <span Class="bold">logtalk_tester -p trealla -f xunit_net_v2 -s &quot;$LOGTALKUSER/&quot; -u <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/55aa900775befa135e0d5b48ea63098df8b97f5c/">https://github.com/LogtalkDotOrg/logtalk3/tree/55aa900775befa135e0d5b48ea63098df8b97f5c/</a></span> 
<p class="level0">
<p class="level0">Run the Logtalk distribution tests using the GNU Prolog backend, passing a base URL to automatically create bug reports: <span Class="bold">logtalk_tester -p gnu -b github:bug,auto -s &quot;$HOME/logtalk3/&quot; -u <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/$(git">https://github.com/LogtalkDotOrg/logtalk3/tree/$(git</a> rev-parse HEAD)/</span> 
<p class="level0">
<p class="level0">Run all tests on the current directory and sub-directories using the YAP backend with its disable signal handling option: <span Class="bold">logtalk_tester -p yap -i &quot;-nosignals&quot;</span> 
<p class="level0">
<p class="level0">Run all Prolog standards compliance tests with the exception of the <span Class="emphasis">catch_3</span> and <span Class="emphasis">cut_0</span> test sets: <span Class="bold">logtalk_tester -p swi -e &quot;.*/(catch_3|cut_0)/.*&quot;</span> 
<p class="level0"><a name="IMPLEMENTATION"></a><h2 class="nroffsh">Implementation notes</h2>
<p class="level0">When the script detects either a <span Class="emphasis">timeout</span> or a <span Class="emphasis">gtimeout</span> command (provided by the GNU <span Class="emphasis">coreutils</span> package), it will use it to run each test set if the timeout option is set to a value greater than zero. This package can be easily installed in POSIX operating-systems (including Linux and macOS) if not provided by default. On Windows operating-systems, the native timeout command is not usable for this purpose. But the Git for Windows installer includes the GNU <span Class="emphasis">coreutils</span> package, which can be used from the bundled Bash shell. 
<p class="level0">Installation of the GNU <span Class="emphasis">sed</span> command, when not available by default, is strongly recommended. The Git for Windows installer includes this command, which can be used from the bundled Bash shell. 
<p class="level0">The version of the <span Class="emphasis">find</span> command provided by some operating-systems doesn&#39;t support (extended) regular-expressions, thus preventing using the <span Class="emphasis">-e</span> option. 
<p class="level0">The <span Class="emphasis">gnunc</span> backend requires creating a GNU Prolog executable that includes Logtalk named <span Class="emphasis">gplgtnc</span> and making it available in the system <span Class="emphasis">PATH</span>. This executable can be created using the embedding script provided in the Logtalk distribution. For example: <span Class="bold">gprolog_embed_logtalk.sh -c -d ~/collect -s none -- --new-top-level &amp;&amp; mv ~/collect/logtalk ~/collect/gplgtnc</span> 
<p class="level0"><a name="ENVIRONMENT"></a><h2 class="nroffsh">Environment</h2>
<p class="level0">
<p class="level0"><span Class="bold">LOGTALKHOME</span> Specifies the location of the Logtalk installation. 
<p class="level0"><span Class="bold">LOGTALKUSER</span> Specifies the location of the Logtalk user directory. 
<p class="level0"><a name="FILES"></a><h2 class="nroffsh">Files</h2>
<p class="level0">
<p class="level0"><span Class="bold">$LOGTALKUSER/library/tester_versions.lgt</span> Logtalk source file used for printing the Logtalk and backend Prolog compiler versions. 
<p class="level0"><span Class="bold">$LOGTALKUSER/library/parallel_logtalk_processes_setup.pl</span> Logtalk source file used for parallel Logtalk processes with selected backend Prolog compilers. 
<p class="level0"><span Class="bold">$LOGTALKUSER/tools/lgtunit/automation_report.lgt</span> Logtalk source file that intercepts unit test execution messages and generates report files that are parsed by this script. 
<p class="level0"><a name="SEE"></a><h2 class="nroffsh">See also</h2>
<p class="level0">The Logtalk website at <a href="https://logtalk.org/">https://logtalk.org/</a> 
<p class="level0">The Logtalk User and Reference Manuals at <span Class="bold">$LOGTALKHOME/manuals/index.html</span> 
<p class="level0"><a name="AUTHOR"></a><h2 class="nroffsh">Author</h2>
<p class="level0">Paulo Moura &lt;pmoura@logtalk.org&gt; 
<p class="level0"><a name="COPYRIGHT"></a><h2 class="nroffsh">Copyright</h2>
<p class="level0">Copyright (c) 1998-2023 Paulo Moura. <p class="roffit">
 This HTML page was made with <a href="http://daniel.haxx.se/projects/roffit/">roffit</a>.
</body></html>
