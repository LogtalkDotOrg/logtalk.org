<!DOCTYPE html><html lang="en">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Tools - Logtalk</title>

<meta name="description" content="Declarative object-oriented logic programming language
">
<link rel="canonical" href="http://localhost:4000/tools.html"><link rel="alternate" type="application/rss+xml" title="Logtalk" href="/feed.xml">
<!-- begin favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#355b95">
<meta name="theme-color" content="#ffffff">
<!-- end favicon --><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" >
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.decodeUrl = function(str) {
    return str ? decodeURIComponent(str.replace(/\+/g, '%20')) : '';
  };


  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i, cb; loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cb = cbs[i]; cb();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.3',
      sources: {
        font_awesome: 'https://use.fontawesome.com/releases/v5.0.13/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn1.lncld.net/static/js/3.4.1/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script></head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner">
        <div></div><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand">
          <strong>[ ⊨ ]&nbsp;</strong><a title="Declarative object-oriented logic programming language
" href="/">Logtalk</a></div>
<!--
        <button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button>
-->
      </div><nav class="navigation">
        <ul><li class="navigation__link"><a href="/rationale.html">Rationale</a></li><li class="navigation__link"><a href="/features.html">Features</a></li><li class="navigation__link"><a href="/documentation.html">Documentation</a></li><li class="navigation__link"><a href="/download.html">Download</a></li><li class="navigation__link navigation__link--active"><a href="/tools.html">Tools</a></li><li class="navigation__link"><a href="/guides.html">Guides</a></li><li class="navigation__link"><a href="/support.html">Support</a></li><li class="navigation__link"><a href="/related.html">Related</a></li><li class="navigation__link"><a href="/news.html">News</a></li><li class="navigation__link"><a href="/search.html"><i class="fa fa-search" aria-hidden="true"></i></a></li><!--
          <li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li>
-->
        </ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class ="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div></aside></div>

              <div class="col-main cell cell--auto"><article itemscope itemtype="http://schema.org/Article"><div class="article__header"><header><h1>Tools</h1></header></div><meta itemprop="headline" content="Tools"><meta itemprop="author" content="Paulo Moura"/><div class="js-article-content"><div class="layout--article">

  <div class="article__content" itemprop="articleBody"><p>Logtalk includes a comprehensive set of developer tools allows you to write,
debug, profile, document, diagram, and test your code. Most of the tools are
implemented as Logtalk applications using the reflection API. This API can be
used to implement alternative tools or new tools. Follows an overview of each
tool and some usage examples.</p>

<h2 id="lint-checker">Lint checker</h2>

<p>Although not technically a developer tool, it is worth mentioning the Logtalk
extensive compiler lint checks as they contribute to earlier detection and
warning of source code issues, helping the user in writing working code. Lint
checks include:</p>

<ul>
  <li>Missing directives (including scope, meta-predicate, dynamic, discontiguous, and multifile directives)</li>
  <li>Duplicated directives</li>
  <li>Missing predicates (calls to non-declared and non-defined predicates)</li>
  <li>Calls to declared but not defined static predicates</li>
  <li>Non-portable predicate calls, arithmetic function calls, directives, flags, and flag values</li>
  <li>Suspicious calls (syntactically valid calls that are likely semantic errors)</li>
  <li>Deprecated directives, control constructs, and flags</li>
  <li>References to unknown entities (objects, protocols, categories, or modules)</li>
  <li>Goals that are always true or always false</li>
  <li>Trivial goal fails (due to no matching predicate clause)</li>
  <li>Redefined built-in predicates</li>
  <li>Lambda expression unclassified variables and mixed up variables</li>
  <li>Singleton variables</li>
  <li>If-then-else and soft cut control constructs without an else part</li>
  <li>Cuts in clauses for multifile predicates</li>
  <li>Missing cut in repeat loops</li>
  <li>Possible non-steadfast predicate definitions</li>
  <li>Redundant calls to control constructs and built-in predicates</li>
  <li>Calls to all-solutions predicates with existentially qualified variables not occurring in the qualified goal</li>
  <li>Calls to all-solutions predicates with no shared variables between template and goal</li>
  <li>Entity, predicate, and variable names not following official coding guidelines</li>
  <li>Variable names that differ only on case</li>
</ul>

<p>Additional checks are provided by the <a href="#make"><code class="highlighter-rouge">make</code></a> and <a href="#dead-code-scanner"><code class="highlighter-rouge">dead_code_scanner</code></a> tools.</p>

<h2 id="documenting">Documenting</h2>

<p>Logtalk includes two documenting tools, <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/lgtdoc/NOTES.md"><code class="highlighter-rouge">lgtdoc</code></a>
and <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/doclet/NOTES.md"><code class="highlighter-rouge">doclet</code></a>, and an
automation script, <a href="man/logtalk_doclet.html"><code class="highlighter-rouge">logtalk_doclet</code></a>. The <code class="highlighter-rouge">lgtdoc</code> tool exports API
documentation files in XML format and includes scripts to convert
these files into a final format such as HTML, PDF, or Markdown.
The <code class="highlighter-rouge">doclet</code> tool can be used to automate the steps to generate API
documentation and diagrams for a Logtalk application.</p>

<p>Logtalk documenting directives allows the programmer to represent
extensive API information on entities and their predicates including:</p>

<ul>
  <li>Entity authors, change date, version, description, and general remarks</li>
  <li>Parametric entity parameter names and descriptions</li>
  <li>Entity compilation flags</li>
  <li>Entity user-defined keys</li>
  <li>Predicate description</li>
  <li>Predicate argument types, instantiation modes, and number of proofs</li>
  <li>Predicate exceptions and usage examples</li>
  <li>Predicate user-defined keys</li>
</ul>

<p>This information is made available for tools such as <code class="highlighter-rouge">lgtdoc</code> using the reflection API.</p>

<h5 id="examples">Examples</h5>

<ul>
  <li>API documentation in HTML format of the <a href="library/iso8601_0.html"><code class="highlighter-rouge">iso8601</code></a> library</li>
  <li><a href="library/index.html">Core, library, and tools</a> API documentation in HTML format illustrating the generated indexes</li>
</ul>

<h2 id="diagrams">Diagrams</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/diagrams/NOTES.md"><code class="highlighter-rouge">diagrams</code></a> tool supports:</p>

<ul>
  <li>Library loading diagrams</li>
  <li>Library dependency diagrams</li>
  <li>Directory loading diagrams</li>
  <li>Directory dependency diagrams</li>
  <li>File loading diagrams</li>
  <li>File dependency diagrams</li>
  <li>Inheritance diagrams</li>
  <li>Entity cross-referencing diagrams</li>
  <li>Predicate cross-referencing diagrams</li>
  <li>Diagrams with links to source code repositories and API documentation</li>
  <li>Linked diagrams for source code navigation from libraries to entities to predicates</li>
  <li>Linked diagrams for source code navigation from directories to files</li>
  <li>Automatic generation of linked sub-diagrams</li>
  <li>Diagrams represented in Graphviz dot language</li>
  <li>Exporting of diagrams to SVG, PDF, and other formats</li>
  <li>Diagram exporting automation scripts (for use with e.g. the <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/doclet/NOTES.md"><code class="highlighter-rouge">doclet</code></a> tool)</li>
  <li>User customization of diagram details</li>
  <li>Support for generating diagrams for module applications when using selected Prolog systems</li>
</ul>

<h5 id="examples-1">Examples</h5>

<p>Linked diagrams with live URLs to code and documentation (click on the nodes, zoom icons, and directory and file names to navigate):</p>

<ul>
  <li><a href="docs/ports_profiler_object_xref_diagram.svg"><code class="highlighter-rouge">ports_profiler</code> object cross-referencing diagram</a></li>
  <li><a href="library/tools_inheritance_diagram.svg">Logtalk developer <code class="highlighter-rouge">tools</code> library diagram</a></li>
  <li><a href="diagrams/talespin/talespin_entity_diagram.svg">SWI-Prolog Talespin application entity diagram</a></li>
  <li><a href="diagrams/cliopatria/cliopatria_directory_load_diagram.svg">SWI-Prolog ClioPatria application directory diagram</a></li>
</ul>

<h2 id="testing">Testing</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/lgtunit/NOTES.md"><code class="highlighter-rouge">lgtunit</code></a> testing tool
can be used to test both Logtalk and Prolog code and provides an extensive set of features including:</p>

<ul>
  <li>Multiple test dialects</li>
  <li>User-defined test dialects</li>
  <li>QuickCheck support</li>
  <li>Code coverage reports (at the predicate clause level; supports links to selected source code hosting providers)</li>
  <li>Test assertions (for easier debugging of failed tests)</li>
  <li>Support for testing input/output predicates</li>
  <li>Support for suppressing irrelevant text/binary output by the code under testing</li>
  <li>Predicate determinism testing</li>
  <li>Benchmarking support</li>
  <li>Approximate float comparison support</li>
  <li>Test set and per test annotations</li>
  <li>Parametrized unit tests</li>
  <li>Testing automation script (supports CI servers)</li>
  <li>TAP and xUnit test reports</li>
  <li>Test set condition, setup, and cleanup goals</li>
  <li>Per test condition, setup, and cleanup goals</li>
  <li>Support for test subsets (with generation of a single code coverage report)</li>
  <li>Make tool integration</li>
</ul>

<p>QuickCheck support includes both test idioms and predicates that can be used e.g. at the top-level for quick testing of plain Prolog predicates and Prolog modules predicates besides Logtalk object predicates.</p>

<p>Test automation is provided by the <a href="man/logtalk_tester.html"><code class="highlighter-rouge">logtalk_tester</code></a> script.
See also the <a href="testing.html">testing guide</a> for more information.</p>

<h5 id="examples-2">Examples</h5>

<ul>
  <li><a href="diagrams/coverage_report.html">Code coverage report</a> for the <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/diagrams/NOTES.md"><code class="highlighter-rouge">diagrams</code></a> tool</li>
  <li><a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/tests/prolog">Prolog standards conformance suite</a></li>
</ul>

<h2 id="dead-code-scanner">Dead code scanner</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/dead_code_scanner/NOTES.md"><code class="highlighter-rouge">dead_code_scanner</code></a>
tool detects likely dead code in Logtalk entities and in Prolog modules (when compiled as objects). It can also
detect code typos that often result in false positives. It can be run automatically was one of the actions of
the <a href="#make"><code class="highlighter-rouge">make</code></a> tool.</p>

<h2 id="code-metrics">Code metrics</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/code_metrics/NOTES.md"><code class="highlighter-rouge">code_metrics</code></a>
tool allows applying code metrics to source code. Several basic metrics are provided:</p>

<ul>
  <li>Halstead complexity</li>
  <li>Cyclomatic complexity</li>
  <li>Efferent coupling</li>
  <li>Afferent coupling</li>
  <li>Instability</li>
  <li>Abstractness</li>
  <li>Documentation</li>
  <li>Source code size</li>
  <li>Depth of Inheritance</li>
  <li>Number of Clauses</li>
  <li>Number of Rules</li>
</ul>

<p>The tool is extensible allowing users to define their own metrics.</p>

<h2 id="ports-profiler">Ports profiler</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/ports_profiler/NOTES.md"><code class="highlighter-rouge">ports_profiler</code></a>
tool is a code profiling tool based on the extended procedure
box model (using the same reflection API as the <a href="#debugging"><code class="highlighter-rouge">debugger</code></a> tool) to count and
report the number of times each port is traversed during the execution of
queries. It provides valuable insight on predicate usage allowing e.g. the
detection of problems that can cause poor performance.</p>

<h5 id="examples-3">Examples</h5>

<ul>
  <li>Profiling <a href="https://forums.logtalk.org/viewtopic.php?f=21&amp;t=240">session</a> of the <code class="highlighter-rouge">searching</code> example sample queries.</li>
</ul>

<h2 id="debugging">Debugging</h2>

<p>Logtalk provides an extended procedure box model that supports:</p>

<ul>
  <li>Classic call, exit, redo, and fail ports</li>
  <li>Exception port</li>
  <li>Fact and rule unification ports</li>
</ul>

<p>This procedure box model is leveraged by the <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/debugger/NOTES.md"><code class="highlighter-rouge">debugger</code></a>
tool to provide:</p>

<ul>
  <li>Predicate spy points</li>
  <li>Context spy points</li>
  <li>Breakpoints (aka line number spy points)</li>
  <li>Extended set of debugging commands at leashed ports</li>
</ul>

<p>Another debugging tool, <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/debug_messages/NOTES.md"><code class="highlighter-rouge">debug_messages</code></a>.
allows selectively enabling of debug messages. Related, the Logtalk message printing mechanism supports a set of predefined
<a href="library/logtalk_0.html#remarks">meta messages</a> that are handy for debugging.</p>

<p>Logtalk also provides a <a href="manuals/refman/control/context_switch_2.html">debugging control construct</a> for calling and testing local object predicates.</p>

<p>See the Handbook section on <a href="manuals/userman/programming.html#programming_debugging">debugging</a> for more details.</p>

<h2 id="make">Make</h2>

<p>Logtalk supports extended <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/make/NOTES.md"><code class="highlighter-rouge">make</code></a> functionality:</p>

<ul>
  <li>Reloading of modified files</li>
  <li>Cleaning of the intermediate Prolog files generated by the compiler</li>
  <li>Generating documentation</li>
  <li>Listing of missing entities</li>
  <li>Listing of missing predicates</li>
  <li>Listing of circular entity dependencies</li>
  <li>Recompilation of loaded files in a different mode (e.g. debug mode)</li>
  <li>User-defined make actions (e.g. running unit tests automatically when reloading modified files)</li>
  <li>Cleaning of the dynamic binding caches</li>
</ul>

<p>The top-level supports handy <a href="manuals/refman/predicates/logtalk_make_1.html">shortcuts</a>
for all the <code class="highlighter-rouge">make</code> features.</p>

<h2 id="prolog-porting">Prolog porting</h2>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/tools/wrapper/NOTES.md"><code class="highlighter-rouge">wrapper</code></a>
tool can be used to help port a plain Prolog application to Logtalk by analyzing its source
files and suggesting object wrappers and their public interfaces. It can also be used to enable
applying other Logtalk developer tools, such as the documenting and diagramming tools, to plain
Prolog code.</p>

<h2 id="coding">Coding</h2>

<p>The Logtalk distribution includes <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/coding">extensive</a>
support for text editors, syntax highlighters (for publishing code), and several IDEs.</p>

<h2 id="embedding">Embedding</h2>

<p>Logtalk includes a set of <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/scripts/embedding">helper scripts</a>
for embedding the Logtalk runtime and Logtalk applications using selected backend Prolog compilers. These scripts greatly
simplify packaging and delivering of applications and can be used as basis for e.g. automatically generating executables and JAR files.</p>

<h5 id="examples-4">Examples</h5>

<ul>
  <li><a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/scripts/embedding/SCRIPT.txt">Embedding examples</a></li>
</ul>

<h2 id="version-management">Version management</h2>

<p>The Logtalk distribution includes a <a href="man/logtalk_version_select.html"><code class="highlighter-rouge">logtalk_version_select</code></a>
script that allows listing and switching between installed versions.</p>

<p>A <a href="https://github.com/LogtalkDotOrg/asdf-logtalk">Logtalk plugin</a> for the <code class="highlighter-rouge">asdf</code> extendable version manager is also available.
This plugin provides an alternative that can be useful to manage Logtalk versions when developing solutions that use other
languages and tools that can also be handled by <code class="highlighter-rouge">asdf</code>.</p>

<h2 id="third-party-tools">Third-party tools</h2>

<h3 id="swi-prolog-tools">SWI-Prolog tools</h3>

<p>Logtalk supports <a href="http://www.swi-prolog.org/">SWI-Prolog</a> <code class="highlighter-rouge">edit/1</code>, <code class="highlighter-rouge">make/0</code>, <code class="highlighter-rouge">consult/1</code>, and <code class="highlighter-rouge">load_files/2</code> (to load Logtalk source files) predicates, the graphical profiler, and the graphical tracer. Recent versions of both Logtalk and SWI-Prolog are required. See the <code class="highlighter-rouge">settings-sample.lgt</code> file for the <strong>required</strong> settings to use the graphical tracer and the graphical profiler.</p>

<h3 id="yap-profilers">YAP profilers</h3>

<p>Logtalk supports the <a href="http://www.cos.ufrj.br/~vitor/Yap/">YAP</a> tick and count profilers. See the <code class="highlighter-rouge">profiler</code> tool in the current Logtalk distribution for details.</p>

<h3 id="sicstus-prolog-profilers">SICStus Prolog profilers</h3>

<p>Logtalk supports the <a href="http://www.sics.se/isl/sicstus.html">SICStus Prolog 4</a> profiler. See the <code class="highlighter-rouge">profiler</code> tool in the current Logtalk distribution for details.</p>

<h3 id="pdt">PDT</h3>

<p><a href="https://sewiki.iai.uni-bonn.de/research/pdt/docs/start">PDT</a> is an open source Prolog IDE provided as a plug-in for the Eclipse IDE. PDT is being extended with Logtalk support.</p>

<p>PDT currently requires a recent version of SWI-Prolog. It’s possible to start up Logtalk automatically by configuring PDT runtime preferences. The configuration depends on the operating-system. After installing Logtalk and setting the <code class="highlighter-rouge">LOGTALKHOME</code> and <code class="highlighter-rouge">LOGTALKUSER</code> environment variables, open Eclipse preferences, select PDT runtime preferences, and enter the following configuration data for the SWI-Prolog executable and for the extra environment variables (change the paths to match your SWI-Prolog and Logtalk installations and your home directory):</p>

<h5 id="macos-example-configuration">macOS example configuration</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/Users/pmoura/bin/swipl -s /opt/local/share/logtalk/integration/logtalk_swi.pl
DISPLAY=:0.0, HOME=/Users/pmoura, LOGTALKHOME=/opt/local/share/logtalk, LOGTALKUSER=/Users/pmoura/logtalk
</code></pre></div></div>

<p>Notes: full paths should be used; no quotes should be used.</p>

<h5 id="windows-example-configuration">Windows example configuration</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmd.exe /c start "cmdwindow" /min "C:\Program Files\pl\bin\swipl-win.exe" -f "%LOGTALKHOME%\integration\logtalk_swi.pl"
</code></pre></div></div>

<p>Notes: if you’re using a recent SWI-Prolog development version you may use the <code class="highlighter-rouge">-s</code> option instead of <code class="highlighter-rouge">-f</code>.</p>

<h5 id="linux-example-configuration">Linux example configuration</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/bin/swipl -L4m -G4m -T4m -s /usr/share/logtalk/integration/logtalk_swi.pl
LOGTALKHOME=/usr/share/logtalk, LOGTALKUSER=/home/pmoura/logtalk
</code></pre></div></div>

<p>Notes: full paths should be used; no quotes should be used.</p>

<p>Using PDT also <strong>requires</strong> specific Logtalk settings. The <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/settings-sample.lgt"><code class="highlighter-rouge">settings-sample.lgt</code></a> file includes two sets of settings for PDT: a basic one and an extended one for allowing use of the SWI-Prolog graphical debugger for tracing Logtalk code. See the comments in the file on how to use settings files.</p>

<p>Currently supported PDT features include consulting Logtalk source files, the source file outline (which requires the source code to be consulted first), and selecting a goal and searching for all declarations and definitions (you must select the whole goal and control-click on the selection).</p>

<h3 id="source-code-version-control-systems">Source code version control systems</h3>

<p>The <a href="https://github.com/LogtalkDotOrg/logtalk3/tree/master/coding">coding</a>
directory includes sample <em>ignore files</em> for common source code version
control systems such as Git and Mercurial.</p>

<h3 id="source-code-stats">Source code stats</h3>

<p><a href="https://github.com/AlDanial/cloc"><code class="highlighter-rouge">cloc</code></a>,
<a href="https://github.com/blackducksoftware/ohcount"><code class="highlighter-rouge">ohcount</code></a>, and
<a href="https://github.com/Aaronepower/tokei"><code class="highlighter-rouge">tokei</code></a> are open-source command-line
tools that count blank lines, comment lines, and lines of source code in
many programming languages including Logtalk.</p>

<h3 id="macos-quicklook">macOS QuickLook</h3>

<p>macOS supports previewing files without opening them using a feature named QuickLook. By default, quick looking a file is just a question of selecting it in the Finder and pressing the keyboard’s space bar. To make this feature also work for previewing Logtalk source files, you can add the necessary registry information to a text editor such as TextMate 2 by editing the application <code class="highlighter-rouge">Info.plist</code> file and adding the following lines to the <code class="highlighter-rouge">UTImportedTypeDeclarations</code> section:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
	UTTypeIdentifier   = "org.logtalk";
	UTTypeTagSpecification = {
		public.filename-extension = ( lgt, logtalk );
	};
	UTTypeConformsTo   = ( "public.source-code" );
	UTTypeIconFile     = "Logtalk";
	UTTypeDescription  = "Logtalk source";
	UTTypeReferenceURL = "https://logtalk.org";
},
</code></pre></div></div>

<p>If the <code class="highlighter-rouge">Info.plist</code> is using XML syntax, then use instead:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dict&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeConformsTo<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;array&gt;</span>
		<span class="nt">&lt;string&gt;</span>public.source-code<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;/array&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeDescription<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>Logtalk source<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeIconFile<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>Logtalk<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeIdentifier<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>org.logtalk<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeReferenceURL<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;string&gt;</span>https://logtalk.org<span class="nt">&lt;/string&gt;</span>
	<span class="nt">&lt;key&gt;</span>UTTypeTagSpecification<span class="nt">&lt;/key&gt;</span>
	<span class="nt">&lt;dict&gt;</span>
		<span class="nt">&lt;key&gt;</span>public.filename-extension<span class="nt">&lt;/key&gt;</span>
		<span class="nt">&lt;array&gt;</span>
			<span class="nt">&lt;string&gt;</span>lgt<span class="nt">&lt;/string&gt;</span>
			<span class="nt">&lt;string&gt;</span>logtalk<span class="nt">&lt;/string&gt;</span>
		<span class="nt">&lt;/array&gt;</span>
	<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
</code></pre></div></div>

<p>After saving the <code class="highlighter-rouge">Info.plist</code> file, close TextMate if open and re-open it. Then try to a QuickLook a Logtalk source file. You should get a preview window with nice syntax highlighting for your code. If not, move the TextMate application to a different folder (e.g. you Desktop) and then back to its original location. This is usually enough to get the Finder to notice and register the Quick Look changes in the application bundle.</p>
</div><footer class="article__footer"><!-- this will show at every article content's bottom --></footer>

  <div class="d-print-none"></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();</script></div><section class="page__comments d-print-none"></section></article>
              </div>
            </div></div></div><div class="page__footer d-print-none">
<div class="footer js-page-footer">
  <div class="main"><aside  itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Paulo Moura"><meta itemprop="url" content="/"><meta itemprop="description" content="Logtalk author and developer."><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Contact us.">
      <a class="button button--circle mail-button" itemprop="email" href="mailto:support@logtalk.org" target="_blank">
        <i class="fas fa-envelope"></i>
      </a><li title="Follow us on Twitter.">
        <a class="button button--circle twitter-button" itemprop="sameAs" href="https://twitter.com/LogtalkDotOrg" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M1024.032 194.432c-37.664 16.704-78.176 28-120.672 33.088 43.36-26.016 76.672-67.168 92.384-116.224-40.608 24.064-85.568 41.568-133.408 50.976-38.336-40.832-92.928-66.336-153.344-66.336-116.032 0-210.08 94.048-210.08 210.08 0 16.48 1.856 32.512 5.44 47.872-174.592-8.768-329.408-92.416-433.024-219.52-18.08 31.04-28.448 67.104-28.448 105.632 0 72.896 37.088 137.184 93.472 174.88-34.432-1.088-66.816-10.528-95.168-26.272-0.032 0.864-0.032 1.76-0.032 2.656 0 101.792 72.416 186.688 168.512 205.984-17.632 4.8-36.192 7.36-55.36 7.36-13.536 0-26.688-1.312-39.52-3.776 26.72 83.456 104.32 144.192 196.256 145.888-71.904 56.352-162.496 89.92-260.928 89.92-16.96 0-33.664-0.992-50.112-2.944 92.96 59.616 203.392 94.4 322.048 94.4 386.432 0 597.728-320.128 597.728-597.76 0-9.12-0.192-18.176-0.608-27.168 41.056-29.632 76.672-66.624 104.832-108.736z" />
</svg>
</div>
        </a>
      </li><li title="Follow us on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/LogtalkDotOrg/logtalk3" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li><li title="Chat with us.">
        <a class="button button--circle gitter-button" itemprop="sameAs" href="https://gitter.im/LogtalkDotOrg/logtalk3" target="_blank">
          <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"/></svg>
<!--
Font Awesome Free 5.4.1 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
--></div>
        </a>
      </li></ul>
</div>
</div>
    </aside>
    <footer class="site-info"><p class="menu menu--center">
        <span>© Paulo Moura 2018-2019</span>
        <a type="application/rss+xml" href="/feed.xml">RSS</a>
      </p>
      <p>Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
        title="TeXt is a succinct theme for blogging." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </p>
    </footer>
  </div>
</div></div></div>
    </div><div class="page__search-panel d-print-none""><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--secondary button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>

<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var searchData = window.TEXT_SEARCH_DATA ? initData(window.TEXT_SEARCH_DATA) : {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  function initData(data) {
    var _data = [], i, j, key, keys, cur;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i], _data[key] = [];
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        cur.title = window.decodeUrl(cur.title);
        cur.url = window.decodeUrl(cur.url);
        _data[key].push(cur);
      }
    }
    return _data;
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) {
      return null;
    }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $searchBox = $('.js-search-box');
  var $searchInput = $searchBox.children('input');
  var $searchClear = $searchBox.children('.js-icon-clear');
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function searchBoxEmpty() {
    $searchBox.removeClass('not-empty'); $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }

  $searchInput.on('input', window.throttle(function() {
    var val = $(this).val();
    if (val === '' || typeof val !== 'string') {
      searchBoxEmpty();
    } else {
      $searchBox.addClass('not-empty'); $result.html(render(searchByQuery(val)));
      $resultItems = $('.search-result__item'); activeIndex = 0;
      $resultItems.eq(0).addClass('active');
    }
  }, 400));
  $searchInput.on('focus', function() {
    $(this).addClass('focus');
  });
  $searchInput.on('blur', function() {
    $(this).removeClass('focus');
  });
  $searchClear.on('click', function() {
    $searchInput.val(''); searchBoxEmpty();
  });

  // search panel
  var $pageRoot = $('.js-page-root');
  var $pageMain = $('.js-page-main');
  var $searchToggle = $('.js-search-toggle');
  var showSearch = false;
  var scrollTop;

  function openSearchPanel() {
    scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
    $pageRoot.addClass('show-search-panel');
    $pageMain.scrollTop(scrollTop);
    $searchInput[0].focus();
  }

  function closeSearchPanel() {
    $pageRoot.removeClass('show-search-panel');
    $(window).scrollTop(scrollTop);
    $searchInput[0].blur();
    setTimeout(function() {
      $searchInput.val(''); searchBoxEmpty();
      window.pageAsideAffix && window.pageAsideAffix.refresh();
    }, 400);
  }

  // Char Code: 13  Enter, 27  ESC, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇, 83  S, 191 /
  function isFormElement(e) {
    var tagName = e.target.tagName || e.srcElement.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  }
  function charCodeFilter(e) {
    return e.target === $searchInput[0] && (e.which === 13 || e.which === 27 || e.which === 38 || e.which === 40);
  }

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  $(document).on('keyup', function(e) {
    if (!isFormElement(e) || charCodeFilter(e)) {
      if (e.which === 83 || e.which === 191) {
        showSearch || (showSearch = true, openSearchPanel());
      } else if (e.which ===  27) {
        showSearch && (showSearch = false, closeSearchPanel());
      } else if (e.which === 38) {
        showSearch && moveActiveIndex('up');
      } else if (e.which === 40) {
        showSearch && moveActiveIndex('down');
      } else if (e.which === 13) {
        showSearch && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });

  $searchToggle.on('click', function() {
    showSearch = !showSearch;
    showSearch ? openSearchPanel() : closeSearchPanel();
  });
});</script></div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();/*(function () {

})();*/</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();</script>
  </body>
</html>